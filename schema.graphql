### PROTOCOL TYPES ***

"""
Stores high-level variables for core protocol.
"""
type Core @entity {
  "Always set to 1"
  id: ID!
  "Array of all listed bonds"
  listedBonds: [Bytes!]!
  "Array of all listed collaterals"
  listedCollaterals: [Bytes!]!
  "Array of all borrower vaults"
  vaults: [Vault!]!
}

"""
Stores the collaterals deposited by the user, along with the debts.
"""
type Vault @entity {
  "User Ethereum address"
  id: ID!
  "Collateral deposited"
  collaterals: [TokenBalance!]!
  "Creation block timestamp"
  createTime: BigInt!
  "Debts owed by the vault owner"
  debts: [TokenBalance!]!
}

"""
Represents a token amount.
"""
type TokenBalance @entity {
  "User Ethereum address concatenated with token contract address"
  id: ID!
  "Token amount"
  amount: BigInt!
  "Token contract address"
  token: Bytes!
}

### AMM TYPES ***

"""
Stores high-level variables for the AMM.
"""
type Amm @entity {
  "Always set to 1"
  id: ID!
  "Array of all AMM pools"
  pools: [Pool!]!
}

"""
Stores the pool reserves, along with the swaps.
"""
type Pool @entity {
  "Pool contract address"
  id: ID!
  "hToken contract address"
  hToken: Bytes!
  "Pool reserve of hToken"
  hTokenReserve: BigDecimal!
  "The hToken maturity timestamp"
  maturity: BigInt!
  "Array of all AMM trades"
  swaps: [Swap!]!
  "Underlying token contract address"
  underlying: Bytes!
  "The ratio between our native precision (18) and the underlying precision"
  underlyingPrecisionScalar: BigInt!
  "Pool reserve of underlying token"
  underlyingReserve: BigDecimal!
}

type Swap @entity {
  "Sequential id"
  id: ID!
  "Account that sends token being sold"
  from: Bytes!
  "hTokens swapped"
  hTokenAmount: BigDecimal!
  "Fee paid by user for swap"
  swapFee: BigDecimal!
  "Timestamp for when the swap happened"
  timestamp: BigInt!
  "Account that receives token being bought"
  to: Bytes!
  "Underlying tokens swapped"
  underlyingAmount: BigDecimal!
}
